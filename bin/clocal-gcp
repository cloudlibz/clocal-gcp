#!/usr/bin/env node

'use strict';

const fs = require('fs');
const path = require('path');
const program = require('commander');

const commandsArray = [];
const commandNameList = [];
const commandsDirectory = path.join(__dirname, '../src/services/cli-commands');

const directories = fs.readdirSync(commandsDirectory);
directories.forEach(dir => {
  commandsArray.push(require(path.join(commandsDirectory, dir, '/cmd.js')));
});

program.version('1.0.0').description('Clocal GCP');

commandsArray.map(command => {
  commandNameList.push(command.commandName);
  program.command(command.commandName).action(command.action);
});

program.command('list').action(() => {
  const commandNames = commandNameList.reduce((prev, current) => {
    return `${prev}\n${current}`;
  }, '');
  console.log(commandNameList.toString());
});

program.parse(process.argv);
